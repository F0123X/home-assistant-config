# # # # # # # # # # # # # # # # # # # # # # #
#                     #                     #
#                   #   #                   #
#                 #       #                 #
#               #           #               #
#             #     Home      #             #
#           #                   #           #
#         # # #   Assistant   # # #         #
#             #               #             #
#             #               #             #
#             #               #             #
#             #               #             #
#             # # # # # # # # #             #
#                                           #
# # # # # # # # # # # # # # # # # # # # # # #
alias: Sonos Say
sequence:
  - service: media_player.sonos_snapshot
    data_template:
      with_group: yes
  - service: media_player.sonos_unjoin
    data_template:
      entity_id: "{{ entity_id }}"
  - service: media_player.sonos_join
    data_template:
      master: "{{ master }}"
      entity_id: "{{ entity_id }}"
  - service: media_player.volume_set
    data_template:
      entity_id: "{{ entity_id }}"
      volume_level: "{{ volume_level }}"
  - service: tts.google_translate_say
    data_template:
      entity_id: "{{ master }}"
      message: "{{ message }}"
  - service: media_player.sonos_restore
    data_template:
      with_group: yes